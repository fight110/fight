define(['jquery', 'jquery/jquery.touchSwipe'], function(require, exports, module) {
    var TouchCarousel=function(p,d){var b=d||{};var k=this,f=null,l=null,i=b.width||$(p).outerWidth(),j=b.height||$(p).outerHeight(),m=0,g=$(p).find("."+b.pageClass),o,t=b.width||$(g[0]).outerWidth(),v=g.length-1,a=false,s=b.animationDuration||500,n={},u=b.autoDirection||"right";$(p).css({overflow:"hidden",height:j,width:i});if(!b.pageIndicatorDisabled){l=$('<ul class="touch-carousel-pager" style="z-index: 9997; position: absolute;"></ul>')}var c=0;$(g).each(function(){$(this).css({position:"absolute",top:0,display:"inline-block",height:"100%",width:"100%"});if(!b.pageIndicatorDisabled){$(l).append('<li class="touch-carousel-pager-item" id ="item-'+c+'" style="display: inline;"><img src="'+String(c==m?b.pagerImageActive:b.pagerImageNormal)+'" /></li>')}c++});if(!b.pageIndicatorDisabled){$(p).append(l)}r(u);function r(z){o=$(g[0]).outerWidth();a=true;var x=0;var w=$(g).get();var y=w.splice(m);w=y.concat(w);if(z==="left"){$(w).each(function(){$(this).css({left:x*o});x++});u="left"}else{if(z==="right"){$($(w).get().reverse()).each(function(){x++;$(this).css({left:x*-o})});$(w[0]).css("left",0);u="right"}}a=false}$(window).on("orientationchange, resize",function(){r(u||"left")});function h(){var x=jQuery.Event("TouchCarousel.Update",{currentPage:m,direction:u});$(p).trigger(x);var w=0;if(!b.pageIndicatorDisabled){$(".touch-carousel-pager-item").find("img").each(function(){$(this).attr("src",String(w==m?b.pagerImageActive:b.pagerImageNormal));w++})}}function e(){return setInterval(function(){if(u=="left"){k.moveToIndex(m+1)}else{if(u=="right"){k.moveToIndex(m-1)}}},b.autoDuration||6600)}this.getDimensions=function(){var w=$(p).offset();return{x:w.top,y:w.left,h:$(p).outerHeight(),w:$(p).outerWidth()}};this.getCurrentPage=function(){return m};this.pause=function(){if(b.auto){if(f){clearInterval(f);f=null}else{f=e()}}};this.destroy=function(){if((n.left!==null)&&(n.right!==null)){$(n.left).remove();$(n.right).remove()}clearInterval(f);$(q).remove();if(l!==null){$(l).remove()}$(p).unbind("TouchCarousel.Update");return null};this.moveToIndex=function(w){if(a){return}else{a=true}var x;o=$(g[0]).outerWidth();if(w<m){if(u!=="right"){r("right")}x=parseInt(m-w);if((m-x)<0){m=(v+1)-x}else{m-=x}$(g).animate({left:"+="+o*x+"px"},s,function(){var y=Math.round($(this).position().left/o);if(y>0){$(this).css("left",((v-1)+y)*-o)}a=false})}else{if(w>m){if(u!=="left"){r("left")}x=parseInt(w-m);if((m+x)>v){m=(v-m)*-x}else{m+=x}$(g).animate({left:"-="+o*x+"px"},s,function(){var y=Math.round($(this).position().left/o);if(y<0){$(this).css("left",(1+(v+y))*o)}a=false})}else{a=false}}h()};if(!b.touchDisabled){var q=$('<div class="touch-carousel-touchpad"></div');$(q).css({"z-index":9997,"background-color":"rgba(1,0,0, "+b.touchPadVisibility||0+")",position:"absolute",width:typeof i==="number"?i+"px":i,height:typeof j==="number"?j+"px":j});$(q).swipe({allowPageScroll:"auto",swipeLeft:function(x,z,A,y,w){k.moveToIndex(m+1);clearInterval(f)},swipeRight:function(x,z,A,y,w){k.moveToIndex(m-1);clearInterval(f)}}).prependTo(p)}else{n={left:b.leftButton||$('<div id="touch-carousel-btn-left" class="touch-carousel-btn" style="z-index: 9999; background-color: rgba(1,1,1,.1); position: inherit; top:0; left: 0; height: inherit; width:'+0.1*t+'px;">&nbsp;</div>'),right:b.rightButton||$('<div id="touch-carousel-btn-right" class="touch-carousel-btn" style="z-index: 9999; background-color: rgba(1,1,1,.1); position: inherit; top:0; right: 0; height: inherit; width:'+0.1*t+'px;">&nbsp;</div>')};$(n.left).prependTo(p);$(n.right).prependTo(p);$(n.right).on("click",function(){k.moveToIndex(m-1)});$(n.left).on("click",function(){k.moveToIndex(m+1)})}if(b.auto){f=e()}};
    return TouchCarousel;
});