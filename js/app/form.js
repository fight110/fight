define(function(c,a,d){var g={init:function(h){},valid:function(h){var j=h.valid,k=h.target,i=h.message;if(false===j){c.async("jquery/jquery.notify",function(l){l.message({title:"\u63d0\u793a",text:i},{expires:2000})})}}};var f=function(m,i,k,l){var j=this;if(typeof m==="string"){m=$(m)}if(l){l=$(l)}else{l=m}this.target=m;this.list=[];this.validlist=[];if(typeof i=="object"){for(var h in i){if(!this.validmethod[h]){throw new Error("method ["+h+"] not defined")}g.init(l);var n=(function(q,o){var p=o.params||[];return function(){var s;for(var t=0,r=m.length;t<r;t++){if(false===q.apply(m[t],p)){s={valid:false,target:l,message:o.message};g.valid(s);return s}else{s={valid:true,target:l};g.valid(s)}}return{valid:true}}})(this.validmethod[h],i[h]);this.validlist.push(n)}}else{if(typeof i=="string"){k=i}}if(k){m.on(k,function(o){j.run()})}};f.prototype={add:function(l,i,j,k){var h=l instanceof f?l:new f(l,i,j,k);this.list.push(h);return this},find:function(h,i,j,l){var k=this.target.find(h);if(k.length){this.add(k,i,j,l)}return this},run:function(){var l=this.list;for(var k=0,h=l.length;k<h;k++){var j=l[k].run();if(j.valid===false){return j}}return this.valid()},valid:function(){for(var k=0,h=this.validlist.length;k<h;k++){var j=this.validlist[k]();if(j.valid===false){return j}}return{valid:true}},validmethod:{required:function(){return !!this.value},url:function(){if(this.value){return !!/^https?:\/\/\w+/i.test(this.value)}return true},min_length:function(h){return this.value.length>=h?true:false},max_length:function(h){return this.value.length<=h?true:false},email:function(){return !!/^[\w.\-]+@[\w.]+$/i.test(this.value)},phone:function(){return !!/^\d{11}$/.test(this.value)},compare:function(h){return !!(this.value==$(h).val())},ajax:function(i,h,k){var l=this.name+"="+this.value,j=this;$.ajax({url:h,type:i,data:l,dataType:"json"}).done(function(m){if(m.error){g.valid({valid:false,message:m.error,target:j})}});return true}}};var e=function(k,j){if(!k instanceof jQuery){k=$(k)}for(var h in j){var i=k.find("[name="+h+"]");if(i.length){switch(i[0].type){case"radio":case"checkbox":i.filter(function(){return this.value==j[h]?true:false}).trigger("click");break;default:i.val(j[h])}}}};var b={validate:function(h,i,j){return new f(h,i,j)},formfill:e};return b});
